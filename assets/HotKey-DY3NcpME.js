import{r as s}from"./index-DV3HGm6M.js";import{e as h}from"./ViewDesignerLoader-9INExxN_.js";import{H as m}from"./DesignerPage-B61Axt1s.js";import"./mobxreact.esm-YJlkT53R.js";import"./MainRouter-aS_Iaf8w.js";import"./collapse-B_kZv9nw.js";import"./asyncToGenerator-CtTh0QTb.js";import"./render-Cw1HGrJm.js";import"./useZIndex-BTBR7p11.js";import"./button-Cvk8VxbG.js";import"./ContextIsolator-oL5Pl0CQ.js";import"./NumberInput-Bl50LkCo.js";import"./index-by9GQrEU.js";import"./GlobalMessage-BFtSe0qv.js";import"./InfoCircleFilled-Co9mi4T9.js";import"./FetchUtil-XmzwyhQj.js";import"./Overflow-DDCCnAKR.js";import"./index-l65SKHf7.js";import"./index-BZlaEHGr.js";import"./Input-esSgYffC.js";import"./Data-BV9iJkIq.js";import"./Button-Bz3NjrPG.js";import"./FontGlobal-DilEOr2K.js";import"./System-S1Hfsdah.js";import"./ThemeEditor-DnzQ9lOi.js";import"./Info-BGt8Y646.js";const v=["alt","tab","control + s","control + l","control + shift + l","control + h","control + f","control + k","control + 1","control + 2","control + 3","control + 4","control + 5","control + g","control + d","control + shift + g"];function P(a){const f=s.useRef(a.handlerMapping??{}),e=s.useRef([]),p=s.useRef({}),d=o=>{const r=p.current[o];if(r)return r;{const t=document.querySelector(o);return t?(p.current[o]=t,t):null}},y=(o,r)=>{const{handler:t,triggerType:i=m.SINGLE,range:n}=f.current[r]||{};if(t&&(i===m.SINGLE||i===m.COILED)){const{pointerTarget:g}=h;if(n){const c=d(n);if(!c||!c.contains(g))return}Array.isArray(t)?t.forEach(c=>c(o)):t(o)}},u=o=>{var i;const r=(i=o.key)==null?void 0:i.toLowerCase();if(!r)return;e.current.some(n=>n===r)||e.current.push(r);const t=e.current.join(" + ");v.some(n=>n===t)&&o.preventDefault(),y(o,t)},l=o=>{const r=o.key.toLowerCase();e.current.some(t=>t===r)&&(e.current=e.current.filter(t=>t!==r))};return s.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",l),document.onvisibilitychange=()=>{document.visibilityState==="visible"&&(e.current=[])},window.onfocus=()=>e.current=[],()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",l),document.onvisibilitychange=null,window.onfocus=null}),[]),null}export{P as default};
